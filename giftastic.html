<!DOCTYPE html>
<html type=en>

<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    <!--<script type="text/javascript" src="assets/javascript/javascript.js"></script
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">-->
    <title>E-I-E-I-O</title>
</head>

<body>
    <div class="container">
        <!--new buttons-->
        <div id="buttonArea"></div>
        <form id="farmAnimal-form">
            <fieldset>
                <legend>Old MacDonald had a Farm e-i-e-i-o!! What other animals are on the farm?</legend>
                <input id="farmAnimalEntry" type="text">
                <button id="addAnimal" type="submit">Submit</button>
            </fieldset>
        </form>
        <div id="farmAnimalOutput">
                <!--gifs go here-->   
        </div>

       	<script type="text/javascript">

       	var topics = ["Pig", "Cow", "Chicken", "Horse", "Goat", "Sheep", "Turkey", "Rooster", "Duck", "Dog"];


       	// links the GET request 
       	function displayFarmAnimal() {
       		var farmAnimal = $(this).attr("data-name");
       		 		apiKey = "ae0b9e17b4d84cb8bdff9a172d556c2c";
       		 		limit = 10;
       			 	URL = "https://api.giphy.com/v1/gifs/search?api_key=" + apiKey + "&q=" + farmAnimal + "&limit=" + limit;
       	 	
						$.ajax({
       	 		url: URL,
       			method: "GET"
       	 	}).done(function(response) {

						var returnedItems = (response).data;
						$("#farmAnimalOutput").empty();

       			var animalDiv = $("<div class='farmAnimals'>");

        		for (var i = 0; i < returnedItems.length; i++) {
            var imgStill = returnedItems[i].images.fixed_height_still.url;
            		imgStart = $("<img>").attr("src", imgStill);
            		animalDiv.append(imgStart);
        //     // var itemMoving = returnedItems[i].images.fixed_height.url;
        	     	rated = returnedItems[i].rating;
        	     	paraRating = $("<p>").text("Rating: " + rated);
        	     	animalDiv.append(paraRating);
       		 		// 	imageMoving = returnedItems[i].images.fixed_height.url;
       		 		// 	image = $("<img>").attr("src", imageMoving);
       		 		// 	animalDiv.append(image);
       		 		// }
       		 		$("#farmAnimalOutput").append(animalDiv);
       		 	}
       	 });
       	}

       		//creates button out of array
       	function createButtons() {

       		$("#buttonArea").empty();

       		for(var i=0; i < topics.length; i++){
       			var btn = $("<button>");
       			btn.addClass("farmAnimals");
       			btn.attr("data-name", topics[i]);
       			btn.text(topics[i]);
       			$("#buttonArea").append(btn);
       		};
       	};

       		//adds new Farm Animals
				$("#addAnimal").on("click", function(event){
       	 	event.preventDefault();
       	 	var anotherFarmAnimal = $("#farmAnimalEntry").val().trim();
       	 	topics.push(anotherFarmAnimal);
       	 	createButtons();
       	 });


				$(document).on("click", ".farmAnimals", displayFarmAnimal);
				createButtons();
       	// 	//var farmAnimal = $("#farmAnimalEntry").val();
       	// 	var apiKey = "ae0b9e17b4d84cb8bdff9a172d556c2c";
       	// 	var limit = 10;
       	// 	var URL = "https://api.giphy.com/v1/gifs/search?api_key=" + apiKey + "&q=" + topics[i] + "&limit" + limit;
       	// 	console.log(topics);

       	// 	$.ajax({
       	// 		url: URL,
       	// 		method: "GET"
       	// 	}).done(function(response) {
       	// 		var returnedItems = (response).data;

        // $("#farmAnimallist").empty();

        // for (var i = 0; i < returnedItems.length; i++) {
        //     var itemStill = returnedItems[i].images.fixed_height_still.url;
        //     // var itemMoving = returnedItems[i].images.fixed_height.url;
        //     // var rating = returnedItems[i].rating;

        //     $("#farmAnimallist").append("<li><img src=" + itemStill + "></img></li>");
        //     // $("#farmAnimallist").append("<li><img src=" + itemMoving + "></img></li>");
        //     // $("#farmAnimallist").append("<li>" + rating + "</li");
        //   }
       	// 	});
       	// });

       		

       	</script>
    </div>
</body>

</html>